# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Timeweb Cloud AI –¥–ª—è CRM

## –û–ø–∏—Å–∞–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Timeweb Cloud AI API –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ CRM.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Timeweb Cloud AI

- ‚úÖ –ë–æ–ª–µ–µ –Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å OpenAI
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- ‚úÖ –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ API

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ Access ID –∏ API —Ç–æ–∫–µ–Ω–∞

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Timeweb Cloud: https://timeweb.cloud/my/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Cloud AI ‚Üí AI-–∞–≥–µ–Ω—Ç—ã**: https://timeweb.cloud/my/cloud-ai/agents
3. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" ‚Üí "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å"**
5. –í–∫–ª—é—á–∏—Ç–µ **"–ü—Ä–∏–≤–∞—Ç–Ω—ã–π API"** –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Access ID** –∞–≥–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `bbd689cc-3715-4771-9843-2cca24481ad8`)
   - **API —Ç–æ–∫–µ–Ω** (JWT —Ç–æ–∫–µ–Ω)

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `backend/.env`:

```env
# Timeweb Cloud AI (–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä)
TIMEWEB_API_TOKEN=eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCIsImtpZCI6IjFrYnhacFJNQGJSI0tSbE1xS1lqIn0...
TIMEWEB_AGENT_ACCESS_ID=bbd689cc-3715-4771-9843-2cca24481ad8

# OpenAI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback –µ—Å–ª–∏ Timeweb –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
# OPENAI_API_KEY=sk-your-openai-key-here
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd backend
uvicorn app.main:app --reload
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç Timeweb**: –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `TIMEWEB_API_TOKEN` –∏ `TIMEWEB_AGENT_ACCESS_ID`, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Timeweb Cloud AI
2. **Fallback –Ω–∞ OpenAI**: –ï—Å–ª–∏ Timeweb –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ OpenAI
3. **–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç**: Timeweb –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∞–≥–µ–Ω—Ç–∞, –ø–ª—é—Å –¥–∞–Ω–Ω—ã–µ CRM –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

## API Endpoints

### POST `/api/ai-assistant/chat`

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Timeweb –∏–ª–∏ OpenAI).

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "message": "–°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑–µ?",
  "conversation_history": []
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–í –±–∞–∑–µ 150 –∫–ª–∏–µ–Ω—Ç–æ–≤, –∏–∑ –Ω–∏—Ö 120 –∞–∫—Ç–∏–≤–Ω—ã—Ö.",
  "data": {
    "total_clients": 150,
    "active_clients": 120,
    ...
  }
}
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –≤ Timeweb

1. –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç–∞ –≤ Timeweb Cloud
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CRM
3. –ü—Ä–æ–º–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞:
   - –†–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ CRM
   - –î–µ–ª–æ–≤–æ–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
   - –†—É—Å—Å–∫–∏–π —è–∑—ã–∫

**–ü—Ä–∏–º–µ—Ä —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è Timeweb –∞–≥–µ–Ω—Ç–∞:**

```
–¢—ã ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è CRM —Å–∏—Å—Ç–µ–º—ã —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞ –∏ –∫–æ–≤–æ—Ä–∫–∏–Ω–≥–∞ Eywa.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–º–æ–≥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º –±–∏–∑–Ω–µ—Å–∞ –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–∏–∑–Ω–µ—Å–∞.

–ü—Ä–∞–≤–∏–ª–∞ –æ–±—â–µ–Ω–∏—è:
- –û—Ç–≤–µ—á–∞–π –¥—Ä—É–∂–µ–ª—é–±–Ω–æ, –Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- –ë—É–¥—å –∫—Ä–∞—Ç–∫–∏–º –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º
- –ò—Å–ø–æ–ª—å–∑—É–π –¥–∞–Ω–Ω—ã–µ CRM, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–π

–¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ small talk
2. –í–æ–ø—Ä–æ—Å—ã –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
3. –í–æ–ø—Ä–æ—Å—ã –æ –∑–∞–ø–∏—Å—è—Ö –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
4. –í–æ–ø—Ä–æ—Å—ã –æ –≤—ã—Ä—É—á–∫–µ
5. –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ –±–∏–∑–Ω–µ—Å–µ
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
cd backend
python3 -c "from app.core.config import get_settings; s = get_settings(); print(f'Timeweb configured: {bool(s.timeweb_api_token and s.timeweb_agent_access_id)}')"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Timeweb API –Ω–∞–ø—Ä—è–º—É—é

```bash
curl -X POST \
  'https://agent.timeweb.cloud/api/v1/cloud-ai/agents/YOUR_ACCESS_ID/v1/chat/completions' \
  -H 'Authorization: Bearer YOUR_TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "model": "gpt-4",
    "messages": [
      {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç"}
    ]
  }'
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "Timeweb AI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –æ–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `TIMEWEB_API_TOKEN`
- `TIMEWEB_AGENT_ACCESS_ID`

### –ü—Ä–æ–±–ª–µ–º–∞: "401 Unauthorized"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–æ–Ω –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –≤–∫–ª—é—á–µ–Ω "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π API"

### –ü—Ä–æ–±–ª–µ–º–∞: "404 Agent not found"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TIMEWEB_AGENT_ACCESS_ID` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Access ID –∞–≥–µ–Ω—Ç–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI –≤–º–µ—Å—Ç–æ Timeweb

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ Timeweb
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Timeweb Cloud AI API](https://agent.timeweb.cloud/docs)
- [–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Timeweb Cloud](https://timeweb.cloud/my/)

